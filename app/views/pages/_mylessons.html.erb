<div class= "container p-3">
  <h1 class="mb-3 text-align-center">My Lessons</h1>
  <div class= "card">
    <div class="card-body p-3">
      <% unless @mylessons.nil? %>
        <% @mylessons.each do |lesson| %>
          <article class="postcard">
            <%= image_tag 'lesson-default.avif', alt: "Default image for #{lesson.title}", class: "postcard__img" unless lesson.photo.attached?%>
            <%= cl_image_tag lesson.photo.key, alt: "Image for #{lesson.title}", class: "postcard__img" if lesson.photo.attached?%>
                <div class="postcard__text">
                  <%= link_to lesson_path(lesson) do  %>
                    <h2 class="postcard__title"><%= lesson.title %></h2>
                  <% end %>
                  <div class="postcard__subtitle small">
                    <h4><%= lesson.category %></h4>
                  </div>
                  <div class="postcard__bar"></div>
                  <div class="postcard__preview-txt"><%= lesson.description %></div>
                    <div class="d-flex justify-content-between">
                      <ul class="postcard__tagbox">
                        <li class="tag__item"><i class="fas fa-tag mr-2"></i> <%= lesson.price %> €/h</li>
                        <li class="tag__item"><i class="fas fa-clock mr-2"></i> <%= lesson.duration %> h</li>
                        <li class="tag__item play blue">
                          <i class="fas fa-play mr-2"></i> Total price: <%= lesson.duration * lesson.price %> €
                        </li>
                      </ul>
                      <div class="postcard__tagbox">
                        <%= link_to "Edit", edit_lesson_path(lesson), class: "bg-primary m-2"  %>
                        <%= link_to "Delete", lesson_path(lesson), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "bg-danger m-2" %>
                      </div>
                    </div>
                </div>
              </article>
        <% end %>
      <% else %>
        <h5 class="mt-3 p-2">No lessons created yet!</h5>
      <% end %>
    </div>
  </div>
  <%= link_to "Create a lesson", new_lesson_path, class:"btn btn-success mt-3"  %>
</div>
